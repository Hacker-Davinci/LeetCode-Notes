

123. Best Time to Buy and Sell Stock III
題目: 簡單來說就是 只能 買賣 賺 兩次錢
思路: 遞迴 求子問題，會開 k x 2 + 1 格子
舉例來說，兩筆買賣，四次交易，所以4格，剩下1格代表沒辦法買賣的 (其實只是方便實作)
基本上就是 "選或不選"
不選 -> skip
選 -> 判斷 當前 是 "買" 還是 "賣"  ，然後執行交易
```cpp
class Solution {
public:
    // dp[day][transaction left]
    // transaction even -> buy, odd -> sell

    int maxProfit(vector<int>& prices) {    
        int n = prices.size();
        vector<vector<int>> dp(n, vector<int>(5, -1));
        int day = 0, transaction_left = 2*2;
        return solve(prices, dp, day, transaction_left);
    }
    int solve(vector<int>& prices, vector<vector<int>> &dp, int day, int transaction_left){
        if(day >= prices.size()) return 0; // impossible
        if(transaction_left == 0) return 0;
        if(dp[day][transaction_left] != -1) return dp[day][transaction_left];
        
        int skip = solve(prices, dp, day+1, transaction_left);
        bool buy_today = (transaction_left%2 == 0);
        int transaction;
        if(buy_today){
            transaction = -prices[day] + solve(prices, dp, day+1, transaction_left-1);
        }else{
            transaction = prices[day] + solve(prices, dp, day+1, transaction_left-1);
        }
        return dp[day][transaction_left] = max(skip, transaction);
        
    }
};

```